---
title: 判断属性是否存在
date: 2024-03-11T14:15:00
authors:
  name: GSemir
  url: https://github.com/GSemir0418
  image_url: https://github.com/GSemir0418.png
  email: gsemir0418@gmail.com
tags: [javascript, reflect, enumerable]
---

常用方法：

- JSON 序列化：`JSON.stringify(obj) === '{}'`
  - 只能序列化字符串类型且可枚举的键，忽略 Symbol 等其他类型或不可枚举的键
- 遍历：`for in | Object.keys(obj).length === 0 `
  - 同样，无法遍历不可枚举且非字符串的属性（enumerable: false）

以上方法都不太严谨，因为处理不了 `const obj = { [Symbol('a'): 1] }` 或不可枚举属性等情况

更严谨的方法：

```js
Reflect.ownKeys(obj).length === 0
```

`Reflect` 是 ES6（ECMAScript 2015）引入的一个内置的对象，它提供了拦截 JavaScript 操作的方法。

`Reflect.ownKeys` 方法用来返回一个由目标对象自身的所有键（包括字符串键、`Symbol` 键）组成的数组。这个方法实际上是在底层提供了一个更完整的方式来获取对象自身的所有属性名称（即使是不可枚举的属性）和 `Symbol` 键值。

因为它设计用来执行默认操作，而无论是字符串还是 `Symbol` 类型的键，都是对象自身属性的一部分。在语言规范中，对象属性的集合被视为属性的名字和它们对应的属性描述符的集合。`Reflect.ownKeys` 正是直接提供了这个集合的视图。



判断属性是否存在



首先定义「存在」

Object.keys() 以及 for in 遍历对象，返回的是**对象自有的可枚举属性**

自有的：可能在原型上

可枚举：可枚举的属性，其`enumerable` 描述符为 `true`

Object.getOwnPropertyDescriptor(obj, 'a') 查看某个属性的描述符

obj.hasOwnProperty('a') 方法检查**对象的自有属性**

in 关键字判断属性是否在**对象及对象的原型链**上